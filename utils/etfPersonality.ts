// utils/etfPersonality.ts

// 1. ë¦¬ìŠ¤í¬ ì„±í–¥ íŒë‹¨ (Q1~Q6 ê¸°ì¤€)
export const getRiskType = (answers: (number | null)[] = []): string => {
  if (!Array.isArray(answers) || answers.length < 6) return 'ì•ˆì •í˜•';

  const score = answers
    .slice(0, 6)
    .map((v) => v ?? 0)
    .reduce((acc, v) => acc + v, 0);

  if (score <= 6) return 'ì•ˆì •í˜•';
  if (score <= 10) return 'ì•ˆì •ì¶”êµ¬í˜•';
  if (score <= 15) return 'ìœ„í—˜ì¤‘ë¦½í˜•';
  if (score <= 20) return 'ì ê·¹íˆ¬ìí˜•';
  return 'ê³µê²©íˆ¬ìí˜•';
};

// 2. ETF ë¶„ë¥˜ì²´ê³„ë³„ ì„íŒ©íŠ¸/í•´ì‹œíƒœê·¸ ì •ë³´
const etfMetaMap: Record<
  string,
  { impact: string; hashtags: string[]; description: string }
> = {
  'ì£¼ì‹-ì „ëµ-ì„±ì¥': {
    impact: 'ğŸš€ ë¯¸ë˜ ë¨¹ê±°ë¦¬ í”½!',
    hashtags: ['#ì„±ì¥ì£¼', '#ë¯¸ë˜ìœ ë§ê¸°ì—…', '#ê³ ì„±ì¥'],
    description:
      'ì„±ì¥ ì „ëµ ETFëŠ” ê¸°ìˆ , í—¬ìŠ¤ì¼€ì–´, ì‹ ì¬ìƒì—ë„ˆì§€ ë“± ë¯¸ë˜ ì„±ì¥ ê°€ëŠ¥ì„±ì´ ë†’ì€ ì‚°ì—…ê³¼ ê¸°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ë¹ ë¥¸ ë§¤ì¶œ ì„±ì¥ê³¼ ë†’ì€ ì£¼ê°€ ìƒìŠ¹ì„ ê¸°ëŒ€í•˜ë©°, ì¥ê¸°ì  ê´€ì ì—ì„œ ìˆ˜ìµë¥ ì„ ì¶”êµ¬í•˜ëŠ” íˆ¬ììì—ê²Œ ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-ê°€ì¹˜': {
    impact: 'ğŸ§  ì €í‰ê°€ í—Œí„°',
    hashtags: ['#ê°€ì¹˜ì£¼', '#ì €í‰ê°€ê¸°ì—…', '#ë‚´ì¬ê°€ì¹˜'],
    description:
      'ê°€ì¹˜ ì „ëµ ETFëŠ” í˜„ì¬ ì €í‰ê°€ëœ ê¸°ì—…ì— íˆ¬ìí•˜ì—¬, ì£¼ê°€ê°€ ë‚´ì¬ê°€ì¹˜ì— ìˆ˜ë ´í•  ë•Œ ìˆ˜ìµì„ ì–»ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë°°ë‹¹ì„ ì§€ê¸‰í•˜ê±°ë‚˜ ì‹¤ì ì´ ì•ˆì •ì ì¸ ê¸°ì—…ë“¤ë¡œ êµ¬ì„±ë˜ë©°, ë³´ìˆ˜ì ì´ê³  í•©ë¦¬ì ì¸ íˆ¬ì ì„±í–¥ì— ë§ìŠµë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-ë°°ë‹¹': {
    impact: 'ğŸ’° ê¾¸ì¤€ìˆ˜ìµëŸ¬',
    hashtags: ['#ë°°ë‹¹ì£¼', '#ì •ê¸°ìˆ˜ìµ', '#í˜„ê¸ˆíë¦„'],
    description:
      'ë°°ë‹¹ ì „ëµ ETFëŠ” ê¾¸ì¤€íˆ ë°°ë‹¹ì„ ì§€ê¸‰í•˜ëŠ” ê¸°ì—…ì„ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ì •ê¸°ì ì¸ í˜„ê¸ˆ íë¦„ì„ ì œê³µí•©ë‹ˆë‹¤. ì•ˆì •ì ì¸ ìˆ˜ìµì„ ì›í•˜ëŠ” íˆ¬ììì—ê²Œ ì í•©í•˜ë©°, ì€í‡´ ì¤€ë¹„ë‚˜ ì¥ê¸° íˆ¬ìì— í™œìš©ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-ì „ëµí…Œë§ˆ': {
    impact: 'ğŸ”¥ ì´ìŠˆí”½ íˆ¬ì',
    hashtags: ['#í…Œë§ˆETF', '#ì‚°ì—…íŠ¸ë Œë“œ', '#í¬ì»¤ìŠ¤ì „ëµ'],
    description:
      'ì „ëµí…Œë§ˆ ETFëŠ” íŠ¹ì • ì‚°ì—… íŠ¸ë Œë“œë‚˜ ì´ìŠˆì— ë”°ë¼ í¬ì»¤ìŠ¤ëœ íˆ¬ìë¥¼ ì§€í–¥í•©ë‹ˆë‹¤. AI, ë©”íƒ€ë²„ìŠ¤, ESG ë“± ì‹œì¥ì—ì„œ ì£¼ëª©ë°›ëŠ” í‚¤ì›Œë“œì— ì§‘ì¤‘í•˜ë©°, ì‹œì˜ì„± ìˆëŠ” ìˆ˜ìµ ê¸°íšŒë¥¼ ì¶”êµ¬í•˜ëŠ” ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-í˜¼í•©/í€€íŠ¸': {
    impact: 'ğŸ“Š ì•Œê³ ë¦¬ì¦˜ ê°ì„±',
    hashtags: ['#í€€íŠ¸ì „ëµ', '#ì•Œê³ ë¦¬ì¦˜ETF', '#ëª¨ë¸ê¸°ë°˜'],
    description:
      'í˜¼í•©/í€€íŠ¸ ì „ëµ ETFëŠ” ë‹¤ì–‘í•œ ìš”ì¸ì„ í†µí•©í•˜ê±°ë‚˜ ì •ëŸ‰ì  ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ë°ì´í„° ì¤‘ì‹¬ì˜ íˆ¬ì íŒë‹¨ì„ ì¤‘ì‹œí•˜ëŠ” ë¶„ì„í˜• íˆ¬ììì—ê²Œ ì–´ìš¸ë¦½ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-êµ¬ì¡°í™”': {
    impact: 'ğŸ² í•˜ì´ë¸Œë¦¬ë“œ íˆ¬ì',
    hashtags: ['#íŒŒìƒETF', '#êµ¬ì¡°í™”ìƒí’ˆ', '#ê³ ê¸‰ì „ëµ'],
    description:
      'êµ¬ì¡°í™” ì „ëµ ETFëŠ” íŒŒìƒìƒí’ˆì´ë‚˜ ì˜µì…˜ ë“±ì„ í™œìš©í•˜ì—¬ ìˆ˜ìµ êµ¬ì¡°ë¥¼ ì¡°ì •í•˜ëŠ” ìƒí’ˆì…ë‹ˆë‹¤. ë³µì¡í•œ êµ¬ì¡°ì§€ë§Œ íŠ¹ì • ë¦¬ìŠ¤í¬ë‚˜ ìˆ˜ìµë¥ ì„ íƒ€ê¹ƒìœ¼ë¡œ í•˜ëŠ” ì „ëµì„ ì·¨í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-ë³€ë™ì„±': {
    impact: 'âš¡ ê³ ìœ„í—˜ ê°ë‹¹ëŸ¬',
    hashtags: ['#ë³€ë™ì„±ì¡°ì ˆ', '#ë¦¬ìŠ¤í¬ê´€ë¦¬', '#ë°©ì–´ì „ëµ'],
    description:
      'ë³€ë™ì„± ì „ëµ ETFëŠ” ì‹œì¥ì˜ ë³€ë™ì„ í™œìš©í•˜ê±°ë‚˜ íšŒí”¼í•˜ëŠ” ì „ëµì„ ì·¨í•©ë‹ˆë‹¤. ìœ„í—˜ì„ ì ê·¹ì ìœ¼ë¡œ ë‹¤ë£¨ê±°ë‚˜ ì•ˆì •ì„±ì„ ì¶”êµ¬í•˜ëŠ” ë° í™œìš©ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì‹œì¥ëŒ€í‘œ': {
    impact: 'ğŸ› ì‹œì¥ ë”°ë¼ê°€ëŠ” ë¬´ë¹™ëŸ¬',
    hashtags: ['#ì‹œì¥ì§€ìˆ˜', '#KOSPI', '#S&P500'],
    description:
      'ì‹œì¥ëŒ€í‘œ ETFëŠ” KOSPI, S&P500ê³¼ ê°™ì€ ëŒ€í‘œ ì§€ìˆ˜ë¥¼ ì¶”ì¢…í•©ë‹ˆë‹¤. ì „ì²´ ì‹œì¥ì˜ íë¦„ì„ ë”°ë¥´ë©°, ë¶„ì‚° íˆ¬ìì™€ í‰ê·  ìˆ˜ìµë¥ ì„ ì¶”êµ¬í•˜ëŠ” ê¸°ë³¸ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°': {
    impact: 'ğŸ§­ ì„¹í„°ì˜ ë„“ì€ ì‹œì•¼',
    hashtags: ['#ì—…ì¢…ETF', '#ì„¹í„°ì „ëµ', '#ë¶„ì‚°íˆ¬ì'],
    description:
      'ì—…ì¢…ì„¹í„° ETFëŠ” ë‹¤ì–‘í•œ ì‚°ì—…êµ°ì— ë¶„ì‚° íˆ¬ìí•˜ëŠ” ìƒí’ˆì…ë‹ˆë‹¤. íŠ¹ì • ì„¹í„°ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì‚°ì—… ì „ë°˜ì„ í¬ê´„í•˜ëŠ” ê´€ì ì—ì„œ íˆ¬ìí•˜ê³ ì í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì •ë³´ê¸°ìˆ ': {
    impact: 'ğŸ¤– ë°˜ë„ì²´=ë¡œë§',
    hashtags: ['#ITì„¹í„°', '#ë°˜ë„ì²´', '#AIí”Œë«í¼'],
    description:
      'ì •ë³´ê¸°ìˆ  ì„¹í„° ETFëŠ” ë°˜ë„ì²´, ì†Œí”„íŠ¸ì›¨ì–´, ì¸ê³µì§€ëŠ¥ ë“± ê¸°ìˆ  ì¤‘ì‹¬ ê¸°ì—…ì— ì§‘ì¤‘í•©ë‹ˆë‹¤. í˜ì‹ ê³¼ ë¯¸ë˜ ì„±ì¥ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-í—¬ìŠ¤ì¼€ì–´': {
    impact: 'âš•ï¸ í—¬ì‹œì½”ì¸ ì¢‹ì•„í•¨',
    hashtags: ['#ë°”ì´ì˜¤', '#ì˜ë£Œì‚°ì—…', '#í—¬ìŠ¤ì¼€ì–´'],
    description:
      'í—¬ìŠ¤ì¼€ì–´ ETFëŠ” ì œì•½, ë°”ì´ì˜¤, ì˜ë£Œê¸°ê¸° ë“± ê±´ê°• ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ì¹˜ìœ ì™€ íšŒë³µ ì¤‘ì‹¬ì˜ ì•ˆì •ì  ì„±í–¥ê³¼ë„ ì—°ê²°ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê¸ˆìœµ': {
    impact: 'ğŸ’³ ê¸ˆì•Œëª» íƒˆì¶œëŸ¬',
    hashtags: ['#ê¸ˆìœµì£¼', '#ì€í–‰ë³´í—˜', '#ì´ììˆ˜ìµ'],
    description:
      'ê¸ˆìœµ ETFëŠ” ì€í–‰, ë³´í—˜, ì¦ê¶Œ ë“± ê¸ˆìœµì—…ì¢…ì— íˆ¬ìí•©ë‹ˆë‹¤. ê¸ˆë¦¬ì— ë¯¼ê°í•˜ë©°, ë³´ìˆ˜ì ì¸ ì„±í–¥ì˜ íˆ¬ììì—ê²Œ ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—ë„ˆì§€í™”í•™': {
    impact: 'ğŸ”‹ ì „ê¸°ì°¨ ëŸ¬ë²„',
    hashtags: ['#ì „ê¸°ì°¨', '#ë°°í„°ë¦¬', '#ì„ìœ í™”í•™'],
    description:
      'ì—ë„ˆì§€ ë° í™”í•™ ETFëŠ” ì„ìœ , ë°°í„°ë¦¬, ì‹ ì¬ìƒì—ë„ˆì§€ ë“± ì›ìì¬ ê¸°ë°˜ ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ê¸€ë¡œë²Œ ìì› ìˆ˜ìš”ì— ë¯¼ê°í•˜ê³ , ì‹¤ë¬¼ê²½ì œ ê¸°ë°˜ ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê²½ê¸°ì†Œë¹„ì¬': {
    impact: 'ğŸ› ìš”ì¦˜ì‡í…œ ê°ë³„ì‚¬',
    hashtags: ['#ìë™ì°¨', '#íŒ¨ì…˜ë·°í‹°', '#ì†Œë¹„íšŒë³µ'],
    description:
      'ê²½ê¸°ì†Œë¹„ì¬ ETFëŠ” ìë™ì°¨, íŒ¨ì…˜, ì—¬í–‰ ë“± ì†Œë¹„ì ì§€ì¶œì´ ë§ì€ ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ì†Œë¹„ íŠ¸ë Œë“œì— ë¯¼ê°í•œ ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ìƒí™œì†Œë¹„ì¬': {
    impact: 'ğŸ§¼ ìƒí™œí…œ ëª¨ìœ¼ëŠ” íˆ¬ì',
    hashtags: ['#ìƒí•„í’ˆ', '#ì‹í’ˆìŒë£Œ', '#ìƒí™œí•„ìˆ˜'],
    description:
      'ìƒí™œì†Œë¹„ì¬ ETFëŠ” ì‹í’ˆ, ìƒí™œìš©í’ˆ ë“± í•„ìˆ˜ ì†Œë¹„ì¬ ì¤‘ì‹¬ì…ë‹ˆë‹¤. ê²½ê¸°ì— ëœ ë¯¼ê°í•˜ë©°, ì•ˆì •ì ì¸ ìˆ˜ìš”ë¥¼ ê°€ì§„ ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê±´ì„¤': {
    impact: 'ğŸ—ï¸ ì¸í”„ë¼ ë•í›„',
    hashtags: ['#ê±´ì„¤ì£¼', '#ì¸í”„ë¼', '#ë¶€ë™ì‚°ê°œë°œ'],
    description:
      'ê±´ì„¤ ETFëŠ” ì¸í”„ë¼, ê±´ì„¤, ë¶€ë™ì‚° ê´€ë ¨ ê¸°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ê²½ê¸° íšŒë³µê³¼ ê°œë°œì— ëŒ€í•œ ê¸°ëŒ€ê°ì´ ë°˜ì˜ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì¤‘ê³µì—…': {
    impact: 'âš™ ë¬µì§í•œ ì‹¤ë¬¼íŒŒ',
    hashtags: ['#ì¡°ì„ ê¸°ê³„', '#ì‚°ì—…ì„¤ë¹„', '#ì œì¡°ì—…'],
    description:
      'ì¤‘ê³µì—… ETFëŠ” ì¡°ì„ , ê¸°ê³„, ì¤‘ì¥ë¹„ ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ì‹¤ë¬¼ ê¸°ë°˜ ëŒ€í˜• ì‚°ì—…ì„ ì„ í˜¸í•˜ëŠ” ì„±í–¥ê³¼ ë§ìŠµë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„œë¹„ìŠ¤': {
    impact: 'ğŸ“± SNS=íˆ¬ìì˜ê°',
    hashtags: ['#SNS', '#ì—”í„°í…Œì¸ë¨¼íŠ¸', '#ë¯¸ë””ì–´'],
    description:
      'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ETFëŠ” SNS, ë¯¸ë””ì–´, ì—”í„°í…Œì¸ë¨¼íŠ¸ ë“± ì •ë³´ ì „ë‹¬ ì‚°ì—…ì— ì§‘ì¤‘í•©ë‹ˆë‹¤. ì˜¨ë¼ì¸ ê¸°ë°˜ì˜ íŠ¸ë Œë””í•œ ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì‚°ì—…ì¬': {
    impact: 'ğŸ›  ì‚°ì—…ì˜ ê·¼ë³¸ íˆ¬ì',
    hashtags: ['#ê¸°ê³„ì„¤ë¹„', '#ì¤‘ê°„ì¬', '#ì¸í”„ë¼ê¸°ì´ˆ'],
    description:
      'ì‚°ì—…ì¬ ETFëŠ” ê¸°ê³„, ì¤‘ê°„ì¬ ë“± ìƒì‚° ê¸°ë°˜ì˜ ì‚°ì—…ì— íˆ¬ìí•©ë‹ˆë‹¤. ì•ˆì •ì„±ê³¼ ì‹¤ìš©ì  ì„±í–¥ì„ ê°€ì§„ íˆ¬ììì—ê²Œ ì–´ìš¸ë¦½ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì² ê°•ì†Œì¬': {
    impact: 'ğŸ”© ì‚°ì—…ê¸°ì´ˆ ë¯¿ëŠ” íƒ€ì…',
    hashtags: ['#ì² ê°•ì£¼', '#ì›ìì¬', '#ê¸°ì´ˆì†Œì¬'],
    description:
      'ì² ê°• ë° ì†Œì¬ ETFëŠ” ì›ìì¬ì™€ ì‚°ì—… ê¸°ì´ˆ ìì¬ì— íˆ¬ìí•©ë‹ˆë‹¤. ì‹¤ë¬¼ê²½ì œì™€ ê°€ì¹˜ ì¤‘ì‹¬ ì„±í–¥ê³¼ ì—°ê²°ë©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—…ì¢…í…Œë§ˆ': {
    impact: 'ğŸ” í…Œë§ˆì— ì§„ì‹¬',
    hashtags: ['#ì„¹í„°ì§‘ì¤‘', '#ì‚°ì—…ë¶„ë¥˜ê¸°ë°˜', '#í…Œë§ˆë² íŒ…'],
    description:
      'ì—…ì¢…í…Œë§ˆ ETFëŠ” ì‚°ì—… ë‚´ ì„¸ë¶€ í…Œë§ˆì— ì§‘ì¤‘í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤. íŠ¹ì • ì‚°ì—… íŠ¸ë Œë“œì— ë¯¼ê°í•˜ê³  ì§‘ì¤‘ íˆ¬ì ì„±í–¥ì„ ì§€ë‹Œ íˆ¬ììì—ê²Œ ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ì „ëµ-ê¸°ì—…ê·¸ë£¹': {
    impact: 'ğŸ™ ê·¸ë£¹ì‚¬ ë¬¶ìŒí”½',
    hashtags: ['#ê·¸ë£¹ETF', '#ì§€ì£¼ì‚¬ì¤‘ì‹¬', '#ì¬ë²Œê³„ì—´'],
    description:
      'ê¸°ì—…ê·¸ë£¹ ETFëŠ” ë™ì¼ ê·¸ë£¹ ë‚´ ê³„ì—´ì‚¬ë¥¼ ë¬¶ì–´ íˆ¬ìí•©ë‹ˆë‹¤. ì§€ë°°êµ¬ì¡°, ê²½ì˜ ì•ˆì •ì„±, ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ ê³ ë ¤í•˜ëŠ” íˆ¬ììì—ê²Œ ì–´ìš¸ë¦½ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ê·œëª¨-ëŒ€í˜•ì£¼': {
    impact: 'ğŸ¢ ëŒ€ê¸°ì—…=ë“ ë“ ',
    hashtags: ['#ëŒ€í˜•ì£¼', '#ì‹œê°€ì´ì•¡ìƒìœ„', '#ì‹œì¥ëŒ€í‘œ'],
    description:
      'ëŒ€í˜•ì£¼ ETFëŠ” ì‚¼ì„±ì „ì ë“± ì‹œê°€ì´ì•¡ ìƒìœ„ ì¢…ëª©ì„ í¬í•¨í•©ë‹ˆë‹¤. ì‹œì¥ ì•ˆì •ì„±ê³¼ ì‹ ë¢°ë„ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì— ì í•©í•©ë‹ˆë‹¤.',
  },
  'ì£¼ì‹-ê·œëª¨-ì¤‘í˜•ì£¼': {
    impact: 'ğŸš€ ì¤‘ì†Œí˜• ì ì¬ì£¼ í”½!',
    hashtags: ['#ì¤‘í˜•ì£¼', '#ì„±ì¥ì ì¬ë ¥', '#í•µì‹¬ì‹ í¥ì£¼'],
    description:
      'ì¤‘í˜•ì£¼ ETFëŠ” ì¼ì • ê·œëª¨ ì´ìƒì˜ ì„±ì¥ì£¼ì— íˆ¬ìí•©ë‹ˆë‹¤. ëŒ€í˜•ì£¼ëŠ” ì•„ë‹ˆì§€ë§Œ ë†’ì€ ì ì¬ë ¥ì„ ê°€ì§„ ê¸°ì—…ì„ ì„ í˜¸í•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤.',
  },
  í˜¼í•©ìì‚°: {
    impact: 'âš–ï¸ ë¶„ì‚°ì€ ì§„ë¦¬',
    hashtags: ['#ìì‚°í˜¼í•©', '#ë¶„ì‚°íˆ¬ì', '#ë©€í‹°ì—ì…‹'],
    description:
      'í˜¼í•©ìì‚° ETFëŠ” ì£¼ì‹, ì±„ê¶Œ, í˜„ê¸ˆ ë“±ì„ í˜¼í•©í•´ êµ¬ì„±í•©ë‹ˆë‹¤. ë¦¬ìŠ¤í¬ ë¶„ì‚°ê³¼ ì•ˆì •ì„± ì¤‘ì‹¬ì˜ ì „ëµì„ ì›í•˜ëŠ” íˆ¬ììì—ê²Œ ì í•©í•©ë‹ˆë‹¤.',
  },
  'í˜¼í•©ìì‚°-ì£¼ì‹+ì±„ê¶Œ': {
    impact: 'ğŸ§˜ ë¦¬ìŠ¤í¬ ë°˜ë°˜ë¬´ë§ì´',
    hashtags: ['#ì£¼ì‹ì±„ê¶Œë¯¹ìŠ¤', '#ë¦¬ìŠ¤í¬ì¤‘ë¦½', '#ê¸°ë³¸í¬íŠ¸í´ë¦¬ì˜¤'],
    description:
      'ì£¼ì‹ê³¼ ì±„ê¶Œì„ ë°˜ë°˜ ì„ì€ ETFë¡œ, ì•ˆì •ì„±ê³¼ ìˆ˜ìµì„±ì„ ê· í˜• ìˆê²Œ ê³ ë ¤í•œ ì „ëµì…ë‹ˆë‹¤. íˆ¬ì ì´ˆë³´ë‚˜ ì•ˆì •ì  ì„±í–¥ì˜ íˆ¬ììì—ê²Œ ì¸ê¸°ê°€ ìˆìŠµë‹ˆë‹¤.',
  },
};

// 3. ë©”íƒ€ì •ë³´ ì¶”ì¶œ í•¨ìˆ˜
const getMetaForType = (name: string) =>
  etfMetaMap[name] || { impact: 'âœ¨ ì„¤ëª… ì¤€ë¹„ì¤‘', hashtags: ['#ETF'] };

// 4. ì§ˆë¬¸ ë²ˆí˜¸ ~ ì„ íƒì§€ì— ë”°ë¥¸ ë¶„ë¥˜ì²´ê³„/ì´ìœ  ë§¤í•‘
const questionReasonMap: Record<
  number,
  Record<number, { types: string[]; reason: string }>
> = {
  6: {
    0: {
      types: ['í˜¼í•©ìì‚°-ì£¼ì‹+ì±„ê¶Œ', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°'],
      reason: 'ì±…ì„ê° ìˆê³  ì•ˆì •ê°ì„ ì¤‘ìš”ì‹œí•˜ì…¨ì–´ìš” (Q7).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—…ì¢…í…Œë§ˆ', 'ì£¼ì‹-ì „ëµ-ì„±ì¥'],
      reason: 'íŠ¸ë Œë“œì— ë¯¼ê°í•˜ê³  ë¹ ë¥´ê²Œ ì›€ì§ì´ëŠ” ìŠ¤íƒ€ì¼ì´ì‹œêµ°ìš” (Q7).',
    },
    2: {
      types: ['ì£¼ì‹-ì „ëµ-ì „ëµí…Œë§ˆ', 'ì£¼ì‹-ì „ëµ-í˜¼í•©/í€€íŠ¸'],
      reason: 'ëª°ì…í˜• ì„±í–¥ì„ ê°–ê³  ê³„ì…¨ì–´ìš” (Q7).',
    },
  },
  7: {
    0: {
      types: ['ì£¼ì‹-ê·œëª¨-ëŒ€í˜•ì£¼', 'ì£¼ì‹-ì „ëµ-ë°°ë‹¹'],
      reason: 'ì•ˆì •ì ì´ê³  ì—¬ìœ  ìˆëŠ” ì¼ìƒì„ ì„ í˜¸í•˜ì…¨ì–´ìš” (Q8).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê±´ì„¤', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„œë¹„ìŠ¤'],
      reason: 'ë„ì‹œ ê¸°ë°˜ ì‚°ì—…ê³¼ íŠ¸ë Œë””í•œ ê²½í—˜ì„ ì¤‘ìš”í•˜ê²Œ ë³´ì…¨ì–´ìš” (Q8).',
    },
    2: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ìƒí™œì†Œë¹„ì¬', 'ì£¼ì‹-ì‹œì¥ëŒ€í‘œ'],
      reason: 'ê¾¸ì¤€í•˜ê³  ëª°ì…í˜• ë¼ì´í”„ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•˜ì…¨êµ°ìš” (Q8).',
    },
  },
  8: {
    0: {
      types: ['ì£¼ì‹-ì „ëµ-ê°€ì¹˜', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê¸ˆìœµ'],
      reason: 'ì‹¤ìš©ì„±ê³¼ í˜„ì‹¤ì ì¸ ì½˜í…ì¸ ì— ê´€ì‹¬ì´ ë§ìœ¼ì…¨ì–´ìš” (Q9).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì •ë³´ê¸°ìˆ ', 'ì£¼ì‹-ì „ëµ-ì„±ì¥'],
      reason: 'ë¯¸ë˜ ê¸°ìˆ ê³¼ í˜ì‹ ì— ê´€ì‹¬ì´ ë†’ìœ¼ì…¨ì–´ìš” (Q9).',
    },
    2: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ìƒí™œì†Œë¹„ì¬', 'í˜¼í•©ìì‚°'],
      reason: 'ì¼ìƒê³¼ í¸ì•ˆí•œ ë¼ì´í”„ì— ê°€ì¹˜ë¥¼ ë‘ì…¨êµ°ìš” (Q9).',
    },
  },
  9: {
    0: {
      types: ['ì£¼ì‹-ì‹œì¥ëŒ€í‘œ', 'ì£¼ì‹-ê·œëª¨-ëŒ€í˜•ì£¼'],
      reason: 'ê²€ì¦ëœ ì•ˆì •ì„±ê³¼ ì‹ ë¢°ë¥¼ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ì…¨ì–´ìš” (Q10).',
    },
    1: {
      types: ['ì£¼ì‹-ì „ëµ-ì „ëµí…Œë§ˆ', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì •ë³´ê¸°ìˆ '],
      reason: 'í˜ì‹ ê³¼ íŠ¸ë Œë“œì— ë¯¼ê°í•˜ì…¨ì–´ìš” (Q10).',
    },
    2: {
      types: ['ì£¼ì‹-ì „ëµ-ê°€ì¹˜', 'ì£¼ì‹-ì „ëµ-í˜¼í•©/í€€íŠ¸'],
      reason: 'ë¶„ì„ì ì´ê³  ì² ì €í•œ ì„±í–¥ì„ ë³´ì—¬ì£¼ì…¨ì–´ìš” (Q10).',
    },
  },
  10: {
    0: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-í—¬ìŠ¤ì¼€ì–´', 'í˜¼í•©ìì‚°-ì£¼ì‹+ì±„ê¶Œ'],
      reason: 'í¸ì•ˆí•¨ê³¼ ì¹˜ìœ  ì¤‘ì‹¬ì˜ ì½˜í…ì¸ ë¥¼ ì„ í˜¸í•˜ì…¨ì–´ìš” (Q11).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—ë„ˆì§€í™”í•™', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì² ê°•ì†Œì¬'],
      reason: 'ì‹¤ë¬¼ê²½ì œ ê¸°ë°˜ì˜ í˜„ì‹¤ì„± ìˆëŠ” ì‹œê°ì„ ë³´ì—¬ì£¼ì…¨ì–´ìš” (Q11).',
    },
    2: {
      types: ['ì£¼ì‹-ì „ëµ-ë³€ë™ì„±', 'ì£¼ì‹-ì „ëµ-êµ¬ì¡°í™”'],
      reason: 'ë¦¬ìŠ¤í¬ì™€ ë°•ì§„ê° ìˆëŠ” ì„ íƒì„ í•˜ì…¨ë„¤ìš” (Q11).',
    },
  },
  11: {
    0: {
      types: ['ì£¼ì‹-ê·œëª¨-ì¤‘í˜•ì£¼', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„œë¹„ìŠ¤'],
      reason: 'ì„±ì¥ ê°€ëŠ¥ì„±ê³¼ ì˜¨ë¼ì¸ ê¸°ë°˜ í™œë™ì„ ì¶”êµ¬í•˜ì…¨ì–´ìš” (Q12).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì¤‘ê³µì—…', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì‚°ì—…ì¬'],
      reason: 'ê¾¸ì¤€í•˜ê³  ì¥ê¸°ì ì¸ ì„±ê³¼ë¥¼ ì¤‘ì‹œí•˜ì…¨ì–´ìš” (Q12).',
    },
    2: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—…ì¢…í…Œë§ˆ', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê²½ê¸°ì†Œë¹„ì¬'],
      reason: 'íŠ¸ë Œë””í•œ ì†Œë¹„ì™€ ì·¨í–¥ í™•ì¥ì„ ì„ í˜¸í•˜ì…¨ì–´ìš” (Q12).',
    },
  },
  12: {
    0: {
      types: ['ì£¼ì‹-ì „ëµ-í˜¼í•©/í€€íŠ¸', 'ì£¼ì‹-ì „ëµ-ë°°ë‹¹'],
      reason: 'ë¶„ì„ì  ì‚¬ê³ ì™€ ì•ˆì •ê°ì„ ì¤‘ì‹œí•˜ì…¨ì–´ìš” (Q13).',
    },
    1: {
      types: ['ì£¼ì‹-ì „ëµ-ì„±ì¥', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì •ë³´ê¸°ìˆ '],
      reason: 'ë¯¸ë˜ ì§€í–¥ì ì¸ ì°½ì˜ì„±ê³¼ íŠ¸ë Œë“œì— ì—´ë ¤ ìˆìœ¼ì…¨ì–´ìš” (Q13).',
    },
    2: {
      types: ['í˜¼í•©ìì‚°', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-í—¬ìŠ¤ì¼€ì–´'],
      reason: 'íšŒë³µê³¼ ì¡°í™”ë¥¼ ì¤‘ìš”ì‹œí•˜ëŠ” ì„±í–¥ì´ì…¨ë„¤ìš” (Q13).',
    },
  },
  13: {
    0: {
      types: ['ì£¼ì‹-ì „ëµ-ê¸°ì—…ê·¸ë£¹', 'í˜¼í•©ìì‚°-ì£¼ì‹+ì±„ê¶Œ'],
      reason: 'ì•ˆì •ì„±ê³¼ ê· í˜•ì„ ë™ì‹œì— ì¶”êµ¬í•˜ì…¨ì–´ìš” (Q14).',
    },
    1: {
      types: ['ì£¼ì‹-ì „ëµ-ë³€ë™ì„±', 'ì£¼ì‹-ê·œëª¨-ì¤‘í˜•ì£¼'],
      reason: 'ëª¨í—˜ê³¼ ê¸°íšŒë¥¼ ì ê·¹ì ìœ¼ë¡œ ì¶”êµ¬í•˜ì…¨ì–´ìš” (Q14).',
    },
    2: {
      types: ['ì£¼ì‹-ì „ëµ-ê°€ì¹˜', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì² ê°•ì†Œì¬'],
      reason: 'ê°€ì¹˜ ì¤‘ì‹¬ì˜ í˜„ì‹¤ì  íŒë‹¨ë ¥ì„ ë³´ì´ì…¨ì–´ìš” (Q14).',
    },
  },
  14: {
    0: {
      types: ['ì£¼ì‹-ì „ëµ-ê¸°ì—…ê·¸ë£¹', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê²½ê¸°ì†Œë¹„ì¬'],
      reason: 'í˜‘ì—…ê³¼ ê·¸ë£¹ ë‚´ í™œë™ì„ ì¤‘ì‹œí•˜ì…¨ì–´ìš” (Q15).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê¸ˆìœµ', 'ì£¼ì‹-ì „ëµ-êµ¬ì¡°í™”'],
      reason: 'ê¸ˆìœµ ë°ì´í„°ì™€ ë³µì¡í•œ ì „ëµ êµ¬ì¡°ì— ê°•ì ì„ ë³´ì´ì…¨ì–´ìš” (Q15).',
    },
    2: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì‚°ì—…ì¬', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì¤‘ê³µì—…'],
      reason: 'ì œì¡°ì™€ ì‹¤ë¬¼ ê¸°ë°˜ì˜ í”„ë¡œì íŠ¸í˜• ì„±í–¥ì´ì…¨ì–´ìš” (Q15).',
    },
  },
  15: {
    0: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ê±´ì„¤'],
      reason: 'ì‚°ì—… ì „ë°˜ê³¼ ì¸í”„ë¼ ê¸°ë°˜ ì‹œì•¼ë¥¼ ê°–ê³  ê³„ì…¨ì–´ìš” (Q16).',
    },
    1: {
      types: ['ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì—ë„ˆì§€í™”í•™', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì² ê°•ì†Œì¬'],
      reason: 'ì‹¤ë¬¼ ê²½ì œì™€ ì›ìì¬ ê¸°ë°˜ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•˜ì…¨ì–´ìš” (Q16).',
    },
    2: {
      types: ['ì£¼ì‹-ì „ëµ-êµ¬ì¡°í™”', 'ì£¼ì‹-ì—…ì¢…ì„¹í„°-ì¤‘ê³µì—…'],
      reason: 'ë¦¬ìŠ¤í¬ ê¸°ë°˜ ì°¨ë³„í™” ì „ëµì— ëŒë¦¬ì…¨ì–´ìš” (Q16).',
    },
  },
};

// 5. ìµœì¢… ì¶”ì²œ íƒ€ì… ì¶”ì¶œ í•¨ìˆ˜ (count + reason + meta í†µí•©)
export const getRecommendedTypesWithReasons = (
  answers: (number | null)[]
): {
  description: string;
  name: string;
  reason: string[];
  impact: string;
  hashtags: string[];
}[] => {
  if (!Array.isArray(answers) || answers.length < 16) return [];

  const counts: Record<string, number> = {};
  const reasonsMap: Record<string, string[]> = {};

  for (let i = 6; i <= 15; i++) {
    const answer = answers[i];
    if (answer == null) continue;

    const qMap = questionReasonMap[i];
    const entry = qMap?.[answer];
    if (!entry) continue;

    entry.types.forEach((type) => {
      counts[type] = (counts[type] || 0) + 1;
      if (!reasonsMap[type]) reasonsMap[type] = [];
      if (!reasonsMap[type].includes(entry.reason)) {
        reasonsMap[type].push(entry.reason);
      }
    });
  }

  return Object.entries(counts)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 3)
    .map(([name]) => ({
      name,
      reason: reasonsMap[name] ?? ['-'], // âœ… ë°°ì—´ë¡œ ìœ ì§€
      ...getMetaForType(name),
    }));
};
